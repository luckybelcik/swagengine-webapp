<!doctype html>
<html lang="en">
  <head>
    <title>Redbud</title>
    <meta name="description" content="The go-to way of command, entity, item, and tile creation for swagengine.">
    <meta charset="utf-8" />
    <link rel="icon" href="%sveltekit.assets%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    %sveltekit.head%
    <script>
  	  (function() {
        const LOCAL_STORAGE_KEY_PREFERENCES = 'swaggappAutosavePreferences';
        let theme = 'sunset';
        
        try {
          const storedData = localStorage.getItem(LOCAL_STORAGE_KEY_PREFERENCES);
          if (storedData) {
            const parsed = JSON.parse(storedData);
            let loadedTheme = null;
            
            if (Array.isArray(parsed.preferences)) {
              parsed.preferences.forEach(prefObj => {
                if (prefObj.theme) {
                  loadedTheme = prefObj.theme;
                }
              });
            } else if (typeof parsed.preferences === 'object' && parsed.preferences !== null) {
              loadedTheme = parsed.preferences.theme;
            }
            
            if (loadedTheme) {
              theme = loadedTheme;
            }
          }
        } catch (e) {
          console.error("Error loading theme from localStorage:", e);
        }
  
        document.documentElement.setAttribute('data-theme', theme);
      })();
  </script>
  </head>
  <body data-sveltekit-preload-data="hover">
    <div style="display: contents">%sveltekit.body%</div>
  </body>
</html>
